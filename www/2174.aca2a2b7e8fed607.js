"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2174],{2174:(U,h,a)=>{a.r(h),a.d(h,{SongsShowPageModule:()=>O});var l=a(6814),g=a(95),s=a(5548),p=a(4248),m=a(5861),f=a(553),n=a(6689),_=a(4423),b=a(8027);const y=["range"];function x(o,i){1&o&&n._UZ(0,"ion-progress-bar",10)}function S(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"ion-button",11),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.back())}),n._UZ(1,"ion-icon",12),n.qZA()}}function w(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"ion-button",11),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.play())}),n._UZ(1,"ion-icon",13),n.qZA()}}function T(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"ion-button",11),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.pause())}),n._UZ(1,"ion-icon",14),n.qZA()}}function v(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"ion-button",11),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.forward())}),n._UZ(1,"ion-icon",15),n.qZA()}}let M=(()=>{var o;class i{constructor(){this.ready=!1,this.buffering=!1,this.progress=0,this.isPlaying=!1,this.isTouched=!1,this.currRangeTime=0}ngOnInit(){}ngOnDestroy(){this.isPlaying&&this.pause()}play(){this.currSong||(this.buffering=!0,console.log("buffering:",this.buffering),this.currSong=new Audio(this.songUrl)),this.playSong()}pause(){this.currSong.pause(),this.isPlaying=!1}playSong(){null!=this.currSong&&this.currSong.pause(),this.currSong.play().then(()=>{this.buffering=!1,this.ready=!0,this.durationText=this.sToTime(this.currSong.duration),this.maxRangeValue=Number(this.currSong.duration.toFixed(2).toString().substring(0,5)),this.isPlaying=!0}),this.currSong.addEventListener("timeupdate",()=>{!this.isTouched&&this.currSong&&(this.currRangeTime=Number(this.currSong.currentTime.toFixed(2).toString().substring(0,5)),this.currSecsText=this.sToTime(this.currSong.currentTime),this.progress=Math.floor(this.currSong.currentTime)/Math.floor(this.currSong.duration),this.currSong.currentTime==this.currSong.duration&&(this.currSong.currentTime=0,this.pause()))})}sToTime(e){return parseInt(String(e/60%60))+":"+this.padZero(parseInt(String(e%60)))}padZero(e){return e<10?"0"+e:e}durationSlider(e){this.currSong.currentTime=e}forward(){this.currSong.currentTime+=5,console.log(this.currSong.currentTime)}back(){this.currSong.currentTime-=5}}return(o=i).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-miniplayer"]],viewQuery:function(e,r){if(1&e&&n.Gf(y,5),2&e){let c;n.iGM(c=n.CRH())&&(r.range=c.first)}},inputs:{songUrl:"songUrl"},decls:17,vars:10,consts:[["type","indeterminate",4,"ngIf"],["id","player","color","light",1,"p-4"],[1,"w-full","flex","items-center","gap-4"],[1,"w-8","text-center"],[1,"text-sm"],[1,"grow"],["type","range","min","0",1,"range",3,"ngModel","max","disabled","input","ngModelChange"],["range",""],[1,"w-full","pb-2","flex","justify-center","items-center","gap-4"],["fill","clear",3,"click",4,"ngIf"],["type","indeterminate"],["fill","clear",3,"click"],["slot","icon-only","color","dark","name","play-back"],["name","play","size","large"],["name","pause","size","large"],["slot","icon-only","color","dark","name","play-forward"]],template:function(e,r){if(1&e){const c=n.EpF();n.YNc(0,x,1,0,"ion-progress-bar",0),n.TgZ(1,"ion-toolbar",1)(2,"div",2)(3,"div",3)(4,"ion-text",4),n._uU(5),n.qZA()(),n.TgZ(6,"div",5)(7,"input",6,7),n.NdJ("input",function(){n.CHM(c);const d=n.MAs(8);return n.KtG(r.durationSlider(d.value))})("ngModelChange",function(d){return r.currRangeTime=d}),n.qZA()(),n.TgZ(9,"div",3)(10,"ion-text",4),n._uU(11),n.qZA()()(),n.TgZ(12,"div",8),n.YNc(13,S,2,0,"ion-button",9),n.YNc(14,w,2,0,"ion-button",9),n.YNc(15,T,2,0,"ion-button",9),n.YNc(16,v,2,0,"ion-button",9),n.qZA()()}if(2&e){let c,u;n.Q6J("ngIf",r.buffering),n.xp6(5),n.Oqu(null!==(c=r.currSecsText)&&void 0!==c?c:"0:00"),n.xp6(2),n.s9C("max",r.maxRangeValue),n.Q6J("ngModel",r.currRangeTime)("disabled",!r.ready),n.xp6(4),n.Oqu(null!==(u=r.durationText)&&void 0!==u?u:"0:00"),n.xp6(2),n.Q6J("ngIf",r.ready),n.xp6(1),n.Q6J("ngIf",!r.isPlaying),n.xp6(1),n.Q6J("ngIf",r.isPlaying),n.xp6(1),n.Q6J("ngIf",r.ready)}},dependencies:[l.O5,g.Fj,g.eT,g.JJ,g.On,s.YG,s.gu,s.X7,s.yW,s.sr],styles:["ion-range[_ngcontent-%COMP%]{--height: 8px}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;margin:10px 0;width:100%}input[type=range][_ngcontent-%COMP%]:focus{outline:none}input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:.375rem;border-radius:.5rem;cursor:pointer;box-shadow:none;background:var(--ion-color-secondary);border:0px solid #000101}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{margin-top:-.375rem;height:1rem;width:1rem;border-radius:9999px;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);box-shadow:none;border:0px solid #000000;background:var(--ion-color-primary);cursor:pointer;-webkit-appearance:none}input[type=range][_ngcontent-%COMP%]:focus::-webkit-slider-runnable-track{background:var(--ion-color-secondary)}input[type=range][_ngcontent-%COMP%]::-moz-range-track{width:100%;height:.375rem;border-radius:.5rem;cursor:pointer;animate:.2s;box-shadow:none;background:var(--ion-color-secondary);border:0px solid #000101}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{height:1rem;width:1rem;border-radius:9999px;box-shadow:none;border:0px solid #000000;background:var(--ion-color-primary);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-ms-track{width:100%;height:.375rem;cursor:pointer;animate:.2s;background:transparent;border-color:transparent;border-width:39px 0;color:transparent}input[type=range][_ngcontent-%COMP%]::-ms-fill-lower{background:var(--ion-color-secondary);border:0px solid #000101;border-radius:50px;box-shadow:none}input[type=range][_ngcontent-%COMP%]::-ms-fill-upper{background:var(--ion-color-secondary);border:0px solid #000101;border-radius:50px;box-shadow:none}input[type=range][_ngcontent-%COMP%]::-ms-thumb{height:1rem;width:1rem;border-radius:9999px;box-shadow:none;border:0px solid #000000;background:var(--ion-color-primary);cursor:pointer}input[type=range][_ngcontent-%COMP%]:focus::-ms-fill-lower{background:var(--ion-color-secondary)}input[type=range][_ngcontent-%COMP%]:focus::-ms-fill-upper{background:var(--ion-color-secondary)}"]}),i})();function Z(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"ion-button",10),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.syncFavorite())}),n._UZ(1,"ion-icon",11),n.qZA()}if(2&o){const t=n.oxw();n.xp6(1),n.Q6J("name",t.isFavorite?"star":"star-outline")("color",t.isFavorite?"secondary":"medium")}}function C(o,i){1&o&&(n.TgZ(0,"div",12),n._UZ(1,"ion-spinner",13),n.qZA())}function P(o,i){if(1&o&&(n.TgZ(0,"ion-badge",21),n._uU(1),n.qZA()),2&o){const t=i.$implicit;n.xp6(1),n.Oqu(t.name)}}function k(o,i){if(1&o&&(n.TgZ(0,"div")(1,"div",14)(2,"div",15),n._uU(3),n.qZA(),n.TgZ(4,"div",16)(5,"h1",17),n._uU(6),n.qZA()()(),n.TgZ(7,"div",18),n.YNc(8,P,2,1,"ion-badge",19),n.qZA(),n._UZ(9,"div",20),n.qZA()),2&o){const t=n.oxw();n.xp6(3),n.hij(" ",t.song.number," "),n.xp6(3),n.hij(" ",t.song.title," "),n.xp6(2),n.Q6J("ngForOf",t.categories),n.xp6(1),n.Q6J("innerHTML",t.song.lyrics,n.oJD)}}function F(o,i){if(1&o&&n._UZ(0,"app-miniplayer",22),2&o){const t=n.oxw();n.Q6J("songUrl",t.songUrl)}}const J=[{path:"",component:(()=>{class o{constructor(t,e,r,c){this.songService=t,this.route=e,this.errorService=r,this.toastController=c,this.loading=!0}ngOnInit(){this.getSong()}getSong(){const t=Number(this.route.snapshot.paramMap.get("number"));this.songService.show(t).subscribe(e=>{this.song=e.data,this.categories=this.song.categories,this.isFavorite=this.song.isFavorite,this.loading=!1,this.song.audio&&this.setAudio()},e=>{this.loading=!1,this.errorService.handleError(e)})}setAudio(){this.audio=this.song.audio,this.songUrl=`${f.T}/audio/${this.audio.filename}`}syncFavorite(){const t={songId:this.song.id,action:this.isFavorite?"detach":"attach"};this.songService.syncFavorite(t).subscribe(e=>{!0===e.success?"attach"===t.action?(this.isFavorite=!0,this.presentToast("M\xfasica adicionada \xe0s favoritas.")):(this.isFavorite=!1,this.presentToast("M\xfasica removida das favoritas.")):this.presentToast("attach"===t.action?"Erro ao adicionar \xe0s favoritas":"Erro ao remover das favoritas")})}presentToast(t){var e=this;return(0,m.Z)(function*(){yield(yield e.toastController.create({message:t,duration:2e3})).present()})()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(_.o),n.Y36(p.gz),n.Y36(b.T),n.Y36(s.yF))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-songs-show"]],decls:11,vars:6,consts:[["mode","ios","collapse","fade",3,"translucent"],["mode","md"],["slot","start"],["defaultHref","/musicas"],["slot","end"],[3,"click",4,"ngIf"],[1,"ion-padding",3,"fullscreen"],["class","loading",4,"ngIf"],[4,"ngIf"],[3,"songUrl",4,"ngIf"],[3,"click"],["slot","icon-only",3,"name","color"],[1,"loading"],["name","dots"],[1,"flex","items-end","gap-2"],[1,"pr-2","border-r-2","border-yellow-500","text-gray-500","text-2xl"],[1,"grow","border-yellow-500"],[1,"m-0","font-semibold"],[1,"my-4","flex","flex-wrap","gap-1"],["color","medium",4,"ngFor","ngForOf"],[1,"lyrics",3,"innerHTML"],["color","medium"],[3,"songUrl"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),n._UZ(3,"ion-back-button",3),n.qZA(),n.TgZ(4,"ion-buttons",4),n.YNc(5,Z,2,2,"ion-button",5),n.qZA()()(),n.TgZ(6,"ion-content",6),n.YNc(7,C,2,0,"div",7),n.YNc(8,k,10,4,"div",8),n.qZA(),n.TgZ(9,"ion-footer"),n.YNc(10,F,1,1,"app-miniplayer",9),n.qZA()),2&t&&(n.Q6J("translucent",!0),n.xp6(5),n.Q6J("ngIf",e.song),n.xp6(1),n.Q6J("fullscreen",!0),n.xp6(1),n.Q6J("ngIf",e.loading),n.xp6(1),n.Q6J("ngIf",e.song),n.xp6(2),n.Q6J("ngIf",e.song&&e.songUrl))},dependencies:[l.sg,l.O5,s.oU,s.yp,s.YG,s.Sm,s.W2,s.fr,s.Gu,s.gu,s.PQ,s.sr,s.cs,M],styles:[".lyrics p{margin-top:1rem;margin-bottom:1rem}\n"],encapsulation:2}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[p.Bz.forChild(J),p.Bz]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[l.ez,g.u5,s.Pc,A]}),o})()}}]);